{% raw %}<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>{% block title %}solo-rs-pool{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <script src="https://unpkg.com/htmx.org@2.0.3"></script>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 2rem; }
    header { display:flex; gap:1rem; align-items:baseline; margin-bottom:1rem; }
    nav a { margin-right: 1rem; text-decoration: none; color: #0366d6; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border-bottom: 1px solid #e5e7eb; padding: .5rem .25rem; text-align: left; }
    .pill { padding: 0.1rem 0.5rem; border-radius: 999px; background:#eef2ff;}
    .muted { color:#6b7280 }
    .grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 1rem; }
    @media (max-width: 900px) { .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body hx-boost="true">
<header>
  <h1 style="margin:0;">solo-rs-pool</h1>
  <nav>
    <a href="/">Dashboard</a>
    <a href="/workers" hx-get="/workers" hx-trigger="every 5s" hx-target="#main" hx-swap="outerHTML">Workers</a>
    <a href="/blocks" hx-get="/blocks"  hx-trigger="every 10s" hx-target="#main" hx-swap="outerHTML">Blocks</a>
  </nav>
  <span class="muted">HTMX auto-refresh (5â€“10s)</span>
</header>
<main id="main">
  {% block content %}{% endblock %}
</main>

<script>
  // SSE for lightweight live updates (job refreshes, new workers)
  const es = new EventSource('/events');
  es.addEventListener('msg', ev => {
    const data = JSON.parse(ev.data);
    console.log('SSE', data);
    // hook for future UI nudges (badges, toasts, etc.)
  });
</script>
</body>
</html>{% endraw %}