{% extends "layout.html" %}
{% block title %}Dashboard Â· solo-rs-pool{% endblock %}
{% block content %}
<div class="grid">
  <section>
    <h2>Current Job</h2>
    {% if job.is_some() %}
      {% set job = job.as_ref().unwrap() %}
      <div>
        <div><b>Job ID:</b> <code>{{ job.job_id }}</code></div>
        <div><b>Prevhash:</b> <code>{{ job.prevhash }}</code></div>
        <div><b>Version:</b> <code>{{ job.version }}</code></div>
        <div><b>nbits:</b> <code>{{ job.nbits }}</code></div>
        <div><b>ntime:</b> <code>{{ job.ntime }}</code></div>
      </div>
    {% else %}
      <p class="muted">No job yet.</p>
    {% endif %}
  </section>

  <section>
    <h2>Workers (recent)</h2>
    <table>
      <thead><tr><th>Name</th><th>Authorized</th><th>Last seen</th></tr></thead>
      <tbody>
      {% for w in workers %}
        <tr>
          <td>{{ w.name }}</td>
          <td>{% if w.authorized %}<span class="pill">yes</span>{% else %}no{% endif %}</td>
          <td class="muted">
            {% if w.last_seen.is_some() %}
              {{ w.last_seen.as_ref().unwrap()|format_rfc3339 }}
            {% else %}
              -
            {% endif %}
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </section>
</div>
{% endblock %}